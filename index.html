<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Surat Pribadi Anda</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div id="app">
        <div id="login-section">
            <h1>Selamat Datang</h1>
            <p>Untuk membaca surat ini, silakan masukkan kata sandi.</p>
            
            <p class="clue-text">Clue = Kata sandi adalah satu teks kalimat surat fisik yang pernah terkirim. Baca kalimat terakhirnya. Satu kata di akhir itu adalah sandi untuk membuka file ini. (tanpa spasi, huruf kecil semua, satu kata saja)</p>
            
            <div class="password-input-container">
                <input type="password" id="password-input" placeholder="Kata Sandi Rahasia">
                <span class="password-toggle" onclick="togglePasswordVisibility()">
                    <i class="fas fa-eye" id="password-toggle-icon"></i>
                </span>
            </div>
            <button onclick="checkPassword()">Masuk</button>
            <p id="error-message" class="hidden">Kata sandi salah. Coba lagi!</p>
            </div>

        <div id="letter-section" class="hidden">
            <h1>Sebuah Pesan dari Hati</h1>
            <div class="letter-content">
                <p>Halo [Nama Penerima],</p>
                <p>Surat ini saya tulis khusus untukmu. Semoga kamu dalam keadaan baik dan pesan ini sampai dengan selamat.</p>
                <p>Sejak kita terakhir bertemu, banyak hal yang terjadi... [**TULIS ISI SURAT ANDA DI SINI**]. Ingatlah semua kenangan indah kita.</p>
                <p>Pesan ini dibuat dengan penuh perhatian dan kasih sayang. Hanya untuk matamu saja.</p>
                <p>Salam hangat selalu,</p>
                <p><span id="sender-name">[Nama Anda]</span></p>
                <p><em>Tanggal: 27 Juli 2025</em></p>
            </div>
            <button onclick="logout()">Keluar</button>
            <button onclick="showMessageForm()">Kirim Pesan</button>
            <audio id="background-music" loop>
                <source src="lagu_90an.mp3" type="audio/mpeg">
                Browser Anda tidak mendukung pemutar audio.
            </audio>
        </div>

        <div id="message-section" class="hidden">
            <h2>Kirim Pesan atau Komentar</h2>
            <p>Ada yang ingin Anda sampaikan? Kirim pesan langsung kepada saya.</p>
            <form action="https://formspree.io/f/yourformhash" method="POST" id="contact-form">
                <input type="email" name="email" placeholder="Email Anda (Opsional)">
                <textarea name="message" placeholder="Tulis pesan Anda di sini..." required></textarea>
                <button type="submit">Kirim Pesan</button>
                <p id="form-status" class="hidden"></p>
            </form>
            <button onclick="hideMessageForm()">Kembali ke Surat</button>
        </div>

        <div id="code-section" class="hidden">
            <h2>Isi Surat (Raw Text)</h2>
            <pre><code id="letter-code"></code></pre>
            <button onclick="hideCode()">Sembunyikan</button>
        </div>
    </div>

    <script>
        // KATA SANDI ANDA ADA DI SINI
        const CORRECT_PASSWORD = 'terasa'; 

        const passwordInput = document.getElementById('password-input');
        const errorMessage = document.getElementById('error-message');
        const loginSection = document.getElementById('login-section');
        const letterSection = document.getElementById('letter-section');
        const codeSection = document.getElementById('code-section');
        const letterCodeElement = document.getElementById('letter-code');
        const backgroundMusic = document.getElementById('background-music');
        const letterContentElement = document.querySelector('#letter-section .letter-content');
        const passwordToggleIcon = document.getElementById('password-toggle-icon');
        
        // Variabel baru untuk elemen form
        const messageSection = document.getElementById('message-section');
        const contactForm = document.getElementById('contact-form');
        const formStatus = document.getElementById('form-status');


        function checkPassword() {
            if (passwordInput.value === CORRECT_PASSWORD) {
                loginSection.classList.add('hidden');
                letterSection.classList.remove('hidden');
                errorMessage.classList.add('hidden');
                passwordInput.value = ''; // Bersihkan input
                
                const playPromise = backgroundMusic.play();
                if (playPromise !== undefined) {
                    playPromise.then(_ => {
                        // Auto-play dimulai
                    }).catch(error => {
                        console.log("Auto-play diblokir. Silakan putar musik secara manual.");
                    });
